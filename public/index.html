<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶∏‡¶ø‡¶¶ | Proxy Shop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Kalpurush', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .invoice-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 500px;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
        }
        
        .invoice-id {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px dashed rgba(255,255,255,0.3);
        }
        
        .invoice-id h2 {
            font-size: 32px;
            letter-spacing: 3px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-family: 'Courier New', monospace;
        }
        
        .details {
            padding: 30px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .detail-row:last-child {
            border-bottom: none;
        }
        
        .label {
            color: #666;
            font-weight: 500;
        }
        
        .value {
            color: #333;
            font-weight: 600;
        }
        
        .status {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        .instructions {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .instructions h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .timer {
            text-align: center;
            padding: 20px;
            background: #fff3cd;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .timer h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        #countdown {
            font-size: 36px;
            font-weight: bold;
            color: #dc3545;
            font-family: 'Courier New', monospace;
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 24px;
            }
            
            .invoice-id h2 {
                font-size: 24px;
            }
            
            .details {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-container">
        <div class="header">
            <h1>üí≥ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶∏‡¶ø‡¶¶</h1>
            <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</p>
            <div class="invoice-id">
                <h2 id="invoiceNumber">INV-000000</h2>
            </div>
        </div>
        
        <div class="details">
            <div class="detail-row">
                <span class="label">üìÖ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</span>
                <span class="value" id="date">Loading...</span>
            </div>
            
            <div class="detail-row">
                <span class="label">üõí ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú</span>
                <span class="value" id="package">Loading...</span>
            </div>
            
            <div class="detail-row">
                <span class="label">üíæ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</span>
                <span class="value" id="quantity">Loading...</span>
            </div>
            
            <div class="detail-row">
                <span class="label">üí∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</span>
                <span class="value" id="amount">Loading...</span>
            </div>
            
            <div class="detail-row">
                <span class="label">üÜî ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ID</span>
                <span class="value" id="userId">Loading...</span>
            </div>
            
            <div class="timer">
                <h3>‚è∞ ‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º</h3>
                <div id="countdown">30:00</div>
                <p>‡¶è‡¶á ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
            
            <div class="instructions">
                <h3>üìã ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ</h3>
                <p>1. ‡¶â‡¶™‡¶∞‡ßá‡¶∞ Invoice ID ‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <p>2. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ü‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</p>
                <p>3. Invoice ID ‡¶ü‡¶ø ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®</p>
                <p>4. ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡ßá‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡¶®</p>
            </div>
            
            <div id="statusContainer">
                <div class="status pending">
                    ‚è≥ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>¬© 2024 Proxy Shop | ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶®: @your_admin_id</p>
            <p>‡¶è‡¶á ‡¶∞‡¶∏‡¶ø‡¶¶‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</p>
        </div>
    </div>

    <script>
        // URL ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶™‡¶°‡¶º‡¶æ
        const urlParams = new URLSearchParams(window.location.search);
        const invoiceId = urlParams.get('invoice') || 'INV-' + Math.random().toString(36).substr(2, 9).toUpperCase();
        const packageName = urlParams.get('package') || 'ABC Proxy';
        const quantity = urlParams.get('quantity') || '1 GB';
        const amount = urlParams.get('amount') || '100 TK';
        const userId = urlParams.get('user') || 'Telegram User';
        
        // ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        document.getElementById('invoiceNumber').textContent = invoiceId;
        document.getElementById('date').textContent = new Date().toLocaleString('bn-BD');
        document.getElementById('package').textContent = packageName;
        document.getElementById('quantity').textContent = quantity;
        document.getElementById('amount').textContent = amount;
        document.getElementById('userId').textContent = userId;
        
        // ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞
        let timeLeft = 30 * 60; // 30 minutes in seconds
        
        function updateCountdown() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('countdown').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                document.getElementById('countdown').textContent = '‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑!';
                document.querySelector('.status').className = 'status pending';
                document.querySelector('.status').innerHTML = '‚ùå ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá';
            }
            timeLeft--;
        }
        
        const timerInterval = setInterval(updateCountdown, 1000);
        updateCountdown();
        
        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤
        window.onload = function() {
            document.getElementById('invoiceNumber').scrollIntoView({ behavior: 'smooth' });
            
            // Invoice ID ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶®
            document.getElementById('invoiceNumber').addEventListener('click', function() {
                const text = this.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    const original = this.textContent;
                    this.textContent = '‚úÖ ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!';
                    setTimeout(() => {
                        this.textContent = original;
                    }, 2000);
                });
            });
        };
        
        // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ö‡ßá‡¶ï (‡¶Ø‡¶¶‡¶ø API ‡¶•‡¶æ‡¶ï‡ßá)
        function checkPaymentStatus() {
            fetch(`/api/check-payment?invoice=${invoiceId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'completed') {
                        document.querySelector('.status').className = 'status success';
                        document.querySelector('.status').innerHTML = '‚úÖ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤!';
                        clearInterval(timerInterval);
                    }
                })
                .catch(error => console.error('Error:', error));
        }
        
        // ‡¶™‡ßç‡¶∞‡¶§‡¶ø 10 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ö‡ßá‡¶ï
        setInterval(checkPaymentStatus, 10000);
    </script>
</body>
</html>
